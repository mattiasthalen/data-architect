# Milestone v0.1.0: Init + Agents

**Status:** SHIPPED 2026-02-08
**Phases:** 1-4
**Total Plans:** 9

## Overview

Milestone 1 delivers a pip-installable Python CLI (`architect init`) that scaffolds a team of six OpenCode-compatible AI agent definitions into any project. The journey starts with the pure-functional Python package foundation and CI pipeline, builds the CLI scaffolding mechanism with all flags and error handling, creates structurally valid agent definitions with full OpenCode integration, and culminates in methodology-deep agent prompts that drive genuine Anchor Modeling debate through CLP stages. By the end, a user can `pip install data-architect`, run `architect init`, open OpenCode, and have a team of domain-expert agents guide them through data warehouse design.

## Phases

### Phase 1: Project Foundation

**Goal**: A pip-installable Python package exists with pure-functional conventions enforced, all quality tooling operational, and CI validating every PR
**Depends on**: Nothing (first phase)
**Requirements**: PROJ-01, PROJ-02, PROJ-03, PROJ-04, PROJ-05, PROJ-06, PROJ-07
**Plans**: 2 plans

Plans:

- [x] 01-01-PLAN.md -- Package skeleton with pyproject.toml, source stubs, and TDD tests
- [x] 01-02-PLAN.md -- Makefile, git hooks, CI workflow, and full pipeline validation

**Success Criteria:**
  1. `uv build` produces a wheel and `pip install` from that wheel succeeds in a clean virtualenv
  2. `make check` runs lint + type-check + test and all three pass with zero warnings
  3. Pre-commit hooks reject a commit with a type error, a lint violation, or a non-conventional commit message
  4. CI pipeline on a pull request runs lint + type + test and reports pass/fail status
  5. Package version is derived from git tags -- no hardcoded version string exists anywhere in source

### Phase 2: CLI Scaffolding

**Goal**: Users can run `architect init` and get files scaffolded into their project directory with clear feedback, idempotent behavior, and helpful errors
**Depends on**: Phase 1
**Requirements**: CLI-01, CLI-02, CLI-03, CLI-04, CLI-05, CLI-06
**Plans**: 2 plans

Plans:

- [x] 02-01-PLAN.md -- Scaffold engine (TDD): pure functions, file manifest, conflict handling, dry-run
- [x] 02-02-PLAN.md -- Typer CLI wiring, symbol output, error handling, integration tests

**Success Criteria:**
  1. `architect init` in an empty directory creates all expected files and prints every file path created
  2. `architect init` in a directory with existing files skips them with a warning; `architect init --force` overwrites them
  3. `architect init --dry-run` prints what would be created without writing any files to disk
  4. `architect init --dir /some/path` scaffolds into the specified directory instead of cwd
  5. `architect init --help` displays usage with examples; common failures produce human-readable error messages

### Phase 3: Agent Definitions + OpenCode Integration

**Goal**: All six agent definitions and supporting OpenCode configuration are scaffolded by `architect init` and recognized by OpenCode as a working agent team
**Depends on**: Phase 2
**Requirements**: AGNT-01, AGNT-02, AGNT-03, AGNT-04, AGNT-05, AGNT-06, OCODE-01, OCODE-02, OCODE-03, OCODE-04, OCODE-05
**Plans**: 2 plans

Plans:

- [x] 03-01-PLAN.md -- Shared context (AGENTS.md, opencode.json, spec schemas) and all 6 agent prompts
- [x] 03-02-PLAN.md -- Skill definitions (/da:start, /da:review, /da:status, /da:export) and test alignment

**Success Criteria:**
  1. After `architect init`, `.opencode/agents/` contains six agent Markdown files with valid YAML frontmatter
  2. After `architect init`, `AGENTS.md` exists in project root with shared ADSS and Anchor Modeling methodology context
  3. After `architect init`, `opencode.json` is pre-configured with default agent, model assignments, and tool permissions
  4. After `architect init`, `.opencode/skills/da-*/SKILL.md` files exist and are invocable as `/da:*` commands
  5. After `architect init`, example YAML spec schemas exist so agents have a reference format

### Phase 4: Agent Quality + Modeling Workflows

**Goal**: Agent prompts encode deep Anchor Modeling methodology and CLP debate protocol so that users can drive genuine multi-agent debate that produces methodology-compliant YAML specs
**Depends on**: Phase 3
**Requirements**: QUAL-01, QUAL-02, QUAL-03, QUAL-04, QUAL-05, MODL-01, MODL-02, MODL-03, MODL-04
**Plans**: 3 plans

Plans:

- [x] 04-01-PLAN.md -- AGENTS.md deep methodology (decision trees) and Data Architect CLP orchestration protocol
- [x] 04-02-PLAN.md -- Subagent depth: SA/BA opposing positions, Veteran Reviewer expanded checklist, DE/AE deepening
- [x] 04-03-PLAN.md -- Skill workflow protocols and YAML spec example expansion

**Success Criteria:**
  1. Data Architect agent can receive a business description, read source documents, and orchestrate CLP debate
  2. System Analyst and Business Analyst take opposing default positions and argue through CLP stages
  3. Debate terminates within bounded iterations with convergence detection or user escalation
  4. Veteran Reviewer critiques using concrete anti-pattern checklist
  5. Agents produce YAML/JSON specs conforming to bootstrapped spec format

---

## Milestone Summary

**Key Decisions:**

- Pivot from Claude Code skill to Python CLI + OpenCode agents (provider flexibility)
- Pure functional Python, no classes (immutability, testability)
- TDD mandatory (correctness critical for DW tooling)
- DAB is probabilistic (agents), DAS/DAR are deterministic (generators)
- Data Architect as entry point agent (natural design authority)
- Specs as contract between agents and generators
- UV for package management (modern, fast)
- Dynamic versioning from git tags (single source of truth)
- Makefile as task runner (universal, zero deps)
- Simple git hooks instead of pre-commit framework (zero deps)
- No hardcoded model assignments in agent frontmatter (user chooses)
- All skills route through data-architect agent as orchestration point
- Bounded iteration debate: 5 rounds max with convergence assessment
- Default to historized: true when uncertain (can't recover lost data)

**Issues Resolved:**

- Template manifest alignment (9 files -> 14 files across phases)
- Typer single-command auto-flattening (solved with callback pattern)
- B008/E501 lint rules per-file-ignored for Typer patterns and template strings

**Issues Deferred:**

- OpenCode runtime validation (requires real OpenCode session)
- End-to-end modeling session testing (requires LLM execution)
- CI pipeline runtime testing (requires GitHub Actions infrastructure)

**Technical Debt Incurred:**

- 9 tech debt items (0 critical, 3 medium, 6 low) â€” all runtime verification items
- Repo AGENTS.md not force-updated after Phase 4 deepening (templates correct, repo copy stale)
- PermissionError CLI branches not covered in automated tests

---

_For current project status, see .planning/ROADMAP.md_
