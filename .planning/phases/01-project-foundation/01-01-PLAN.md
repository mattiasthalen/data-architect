---
phase: 01-project-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pyproject.toml
  - .python-version
  - src/data_architect/__init__.py
  - src/data_architect/__main__.py
  - src/data_architect/cli.py
  - src/data_architect/py.typed
  - tests/__init__.py
  - tests/test_init.py
  - tests/test_cli.py
autonomous: true

must_haves:
  truths:
    - "Package can be built with uv build producing a wheel"
    - "Package is importable as data_architect after install"
    - "__version__ returns a string from importlib.metadata (not hardcoded)"
    - "CLI stub exists and exits with a message when called"
    - "All tests pass with pytest and coverage >= 90%"
  artifacts:
    - path: "pyproject.toml"
      provides: "Build config with Hatchling + uv-dynamic-versioning"
      contains: "uv-dynamic-versioning"
    - path: "src/data_architect/__init__.py"
      provides: "Package root with dynamic __version__"
      contains: "importlib.metadata.version"
    - path: "src/data_architect/cli.py"
      provides: "CLI stub entry point"
      contains: "def app"
    - path: "tests/test_init.py"
      provides: "Package import and version tests"
      contains: "test_version_is_string"
    - path: "tests/test_cli.py"
      provides: "CLI stub tests"
      contains: "test_cli_stub_exits"
  key_links:
    - from: "pyproject.toml"
      to: "src/data_architect/cli.py"
      via: "console_scripts entry point"
      pattern: 'architect = "data_architect.cli:app"'
    - from: "src/data_architect/__init__.py"
      to: "pyproject.toml"
      via: "importlib.metadata reads installed package name"
      pattern: 'version\\("data-architect"\\)'
    - from: "tests/test_init.py"
      to: "src/data_architect/__init__.py"
      via: "import data_architect"
      pattern: "import data_architect"
---

<objective>
Create the pip-installable Python package skeleton with pyproject.toml (Hatchling + uv-dynamic-versioning), all source stubs, and tests following TDD red-green flow.

Purpose: This is the foundation every subsequent phase builds on. Without a buildable, testable package, nothing else works.
Output: A complete Python package that `uv build` can produce a wheel from, with tests validating the structure.
</objective>

<execution_context>
@./.opencode/get-shit-done/workflows/execute-plan.md
@./.opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-project-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create pyproject.toml, .python-version, and source stubs</name>
  <files>
    pyproject.toml
    .python-version
    src/data_architect/__init__.py
    src/data_architect/__main__.py
    src/data_architect/cli.py
    src/data_architect/py.typed
  </files>
  <action>
    Create the complete package build configuration and source files.

    **pyproject.toml** — Use the EXACT configuration from 01-RESEARCH.md Q1, which includes:
    - `[project]` with `name = "data-architect"`, `dynamic = ["version"]`, `requires-python = ">=3.13"`, `dependencies = []`
    - `[project.scripts]` with `architect = "data_architect.cli:app"`
    - `[build-system]` with Hatchling + uv-dynamic-versioning
    - `[tool.hatch.version]` source = "uv-dynamic-versioning"
    - `[tool.hatch.build.targets.wheel]` packages = ["src/data_architect"] (CRITICAL for src layout)
    - `[tool.uv-dynamic-versioning]` fallback-version = "0.0.0+unknown"
    - `[tool.uv]` dev-dependencies (pytest>=9.0.0, pytest-cov>=7.0.0, hypothesis>=6.151.0, mypy>=1.19.0, ruff>=0.15.0) and cache-keys
    - `[tool.ruff]` with target-version py313, rules: E, W, F, UP, B, I, SIM, TC (NOT TCH), RUF, PT, ARG, C4, T20, ANN, S. Ignore S101. Per-file-ignores for tests: S101, ANN, ARG.
    - `[tool.mypy]` strict = true with tests override (disallow_untyped_defs = false)
    - `[tool.pytest.ini_options]` with --cov=data_architect --cov-report=term-missing --strict-markers -x
    - `[tool.coverage.run]` source = ["data_architect"], branch = true
    - `[tool.coverage.report]` fail_under = 90, show_missing = true, exclude_lines for pragma, TYPE_CHECKING, __main__

    **.python-version** — Single line: `3.13`

    **src/data_architect/__init__.py** — Dynamic version via `importlib.metadata.version("data-architect")` with PackageNotFoundError fallback to "0.0.0". Include module docstring.

    **src/data_architect/__main__.py** — Import and call `app` from `data_architect.cli`. Guard with `if __name__ == "__main__":  # pragma: no cover`.

    **src/data_architect/cli.py** — Single function `def app() -> None:` that raises `SystemExit` with message "data-architect CLI not yet implemented. Coming in Phase 2." No Typer dependency — plain Python function.

    **src/data_architect/py.typed** — Empty file (PEP 561 marker).

    After creating files, run `uv sync --dev` to install dependencies and create uv.lock. Then run `uv build` to verify the wheel builds.

    AVOID:
    - Do NOT use `TCH` in Ruff config — use `TC` (renamed in 0.15.0)
    - Do NOT reference `ANN101` or `ANN102` — removed in Ruff 0.15.0
    - Do NOT hardcode a version string anywhere — always use dynamic versioning
    - Do NOT add runtime dependencies — Phase 1 is zero-dependency
    - Do NOT use NamedTuples — frozen dataclasses only (per user decision)
    - Do NOT use `pre-commit` framework — simple git hooks (Plan 02 handles this)
  </action>
  <verify>
    1. `uv sync --dev` completes without errors
    2. `uv build` produces files in `dist/` (both .whl and .tar.gz)
    3. `uv run python -c "import data_architect; print(data_architect.__version__)"` prints a version string
    4. `uv run python -c "from data_architect.cli import app; print(type(app))"` prints `<class 'function'>`
  </verify>
  <done>
    pyproject.toml exists with Hatchling build, uv-dynamic-versioning, all tool configs. Four source files exist in src/data_architect/. `uv build` produces a wheel. Package is importable.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create tests (TDD) and verify green</name>
  <files>
    tests/__init__.py
    tests/test_init.py
    tests/test_cli.py
  </files>
  <action>
    Create the test files following TDD convention (tests define the contract).

    **tests/__init__.py** — Empty file (makes tests a package for imports).

    **tests/test_init.py** — Three tests:
    1. `test_package_is_importable()` — `import data_architect` succeeds, module is not None
    2. `test_version_is_string()` — `data_architect.__version__` is a non-empty string
    3. `test_version_not_unknown()` — `"+unknown"` not in `data_architect.__version__` (proves package is installed, not fallback)

    **tests/test_cli.py** — Two tests:
    1. `test_cli_module_is_importable()` — `from data_architect.cli import app` succeeds, app is not None
    2. `test_cli_stub_exits()` — Calling `app()` raises `SystemExit` (use `pytest.raises(SystemExit)`)

    All test functions should have docstrings explaining what they verify. Use `-> None` return annotations on all test functions.

    After creating tests, run `uv run pytest` — all 5 tests must pass with coverage >= 90%.

    Then run `uv run ruff check .` and `uv run ruff format --check .` to verify lint/format pass.
    Then run `uv run mypy src` to verify type checking passes.

    AVOID:
    - Do NOT use classes in tests — plain test functions per pure-functional convention
    - Do NOT skip the version_not_unknown test — it validates dynamic versioning works
  </action>
  <verify>
    1. `uv run pytest` — all 5 tests pass, coverage >= 90%
    2. `uv run ruff check .` — zero errors
    3. `uv run ruff format --check .` — no formatting changes needed
    4. `uv run mypy src` — zero errors ("Success: no issues found")
  </verify>
  <done>
    All 5 tests pass. Coverage >= 90% on data_architect package. Ruff lint, Ruff format, and mypy all pass with zero errors. The package is fully validated.
  </done>
</task>

</tasks>

<verification>
- `uv build` produces a .whl file in dist/
- `uv run pytest` passes all 5 tests with >= 90% coverage
- `uv run ruff check .` reports zero errors
- `uv run ruff format --check .` reports zero changes needed
- `uv run mypy src` reports "Success: no issues found"
- No hardcoded version string exists in source (grep -r "version.*=" src/ should only find importlib.metadata pattern)
</verification>

<success_criteria>
1. pyproject.toml has Hatchling + uv-dynamic-versioning + all tool configs
2. 4 source files exist in src/data_architect/ (__init__.py, __main__.py, cli.py, py.typed)
3. 3 test files exist in tests/ (__init__.py, test_init.py, test_cli.py)
4. `uv build` produces a wheel
5. All 5 tests pass with >= 90% coverage
6. Lint + type-check pass with zero errors
</success_criteria>

<output>
After completion, create `.planning/phases/01-project-foundation/01-01-SUMMARY.md`
</output>
